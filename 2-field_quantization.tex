\chapter{Electromagnetic Field Quantization}

\label{ch:EM_quantization}

This chapter attempts to extend the vacuum derivation to also account for a spatially dependent dielectric function.
Given the importance of quantizing the electromagnetic field in media to the Casimir effect,
we will discuss the quantization at length, and discuss varying approaches to the problem.  
Different assumptions about the media, and quantization procedures, can lead to quite different 
worldline methods.

  We start from the Lagrangian for the EM field and verify it gives the correct equations of motion.
  We then go over to the Hamiltonian formalism, by taking the Poisson brackets over to commutation relations.
  We enforce the constraints generated by the Lagrangian/Hamiltonian by restricting the states we allow in the theory.
  This allows us to write down the partition function and turn it into a path integral. 
  
  We will then convert the resulting partition function into their corresponding worldline path-integrals
  for both the scalar polarization decomposition, and the matrix 
  Finally, we will discuss how these procedures are modified to include dispersion.  

\section{Other work}
Quantization of the electromagnetic field inside dielectric has been considered
 by a number of authors.  
Some care is required to handle dispersion, since the Kramers-Kr\"onig relations
 imply this also requires dissipation \comment{citation?}.  
This is typically handled by coupling the electromagnetic field to an idealized
 medium, and coupling the medium to a bath of oscillators that models
 dissipation~\cite{Huttner1992,Dung1998}.  This linear coupling to oscillators is not 
strictly necessary --- if the dielectric function is derived in linear-response theory~(\cite{Rahi2009}).

Bechler has carried out path integral quantization for a harmonic medium 
including dispersion, and shown agreement with previous results in terms 
of noise operators~(\cite{Bechler1999}).  
The primary results were the form of the propagator, 
rather than computations exploiting the propagator.
  There has been some work attempting to develop path integral quantization of
 the field inside dielectric neglecting dispersion~\cite{Bordag1998}.
  Unfortunately, these results are hard to interpret given that the non-physical
 degrees of freedom for the field do not cleanly decouple, as opposed to the 
usual situation in free space QED.
  The primary focus here was to explore the divergence structure of the theory
 via the Heat Kernel expansion, which corresponds to the small time expansion
 of a worldline path integral.
  We choose to avoid this issue by focusing on improved scalar models, 
that also correspond to the physical degrees of freedom for the field in certain geometries.  


(We will briefly note methods based on computing van der Waals energies in the static field limit,
by evaluating functional determinants for discrete spatial grids~\cite{Maggs2006,Pasquali2008}. This approach 
omits any time evolution, but it does offer a direct method of trying to evaluate the field path integral.)

%copied from Intro.  
We are interested in small energies relative to the binding energies of the dielectrics, and very weak
fields.  In this limit, the effect of the electromagnetic field on the matter can be described 
 by the linear susceptibility $\chi$.  The susceptibility $\chi$
is found from the microscopic theory via linear-response such as the Kubo formula~\cite{Rahi2009,Altland2011}.
The Kubo formula relates the conductivity tensor of the medium to the current-current correlation function,
which corresponds to the electron loop in Fig.~\ref{fig:electron-effective-interaction}.
These current fluctuations on different bodies then interact with one another via photons, which are 
described by the electromagnetic Green function.  

\section{Maxwell's Equations and potentials}

Maxwell's equations in a dielectric, non magnetic medium, without sources  are
\begin{align}
\nabla \cdot \vect{D} = 0  \qquad 
&\nabla \times \vect{E} = -\partial_t\vect{B}\\
\nabla \cdot \vect{B} = 0\qquad
&\nabla\times\vect{H} = \partial_t\vect{D},
\end{align}
where the fields obey the constitutive relations $\vect{D}=\epsilon\vect{E}$, $\vect{H}=\mu\vect{B}$.

Here we will ignore the frequency dependence and dispersion.
  We are implicitly assuming a monochromatic field.
  Later, we will extend this work to handle frequency dependence in the dielectric.
  Dealing with dispersion also forces us to deal with dissipation.
  Quantization with a dielectric medium has been done by Huttner and Barnett~\cite{Huttner1992}, 
  and in the Casimir context by Rosa~\textit{et.~al.}~\cite{Rosa2010}.  

% For a linear medium we can write 
% \begin{equation}
% \vect{P}(\vect x) = \epsilon_0\chi(\vect x)\vect{E}(\vect x),
% \end{equation}
% where $\vect{P}$ is the polarization and $\chi$ is the linear response function of the medium.
%   The displacement can be rewritten
% \begin{equation}
% \vect{D}(\vect x) = \epsilon_0\vect{E}+\vect{P} = 
% \epsilon_0(1+\chi(\vect x))\vect{E}(\vect x)= \epsilon_0\epsvx\vect{E}(\vect x).
% \end{equation}
The fields can be rewritten in terms of the potentials:
\begin{align}
\vect{B} = \nabla\times\vect A\qquad 
\vect{E} = -\nabla\phi -\partial_t\vect A,
\end{align}
which automatically satisfies two of Maxwell's equations.  
There is also another choice of potentials, which is less commonly used in physics.
In these dual potentials the fields are given by 
\begin{equation}
  \vect{D}=\nabla\times\vect{C}\qquad
  \vect{H}=-\nabla\Lambda-\partial_t\vect{C}
\end{equation}
\comment{Must be equivalent under a Lorentz transformation and a gauge-transformation?}

Note that the fields are unchanged if we make the following gauge transformation $(\phi,\vect A)\rightarrow(\phi',\vect A')$.  
\begin{align}
  \vect A' = \vect A +\nabla\alpha\qquad
  \phi' = \phi - \partial_t\alpha
\end{align}

% The remaining two Maxwell equations are then given by
% \begin{align}
% \nabla\cdot\left[ \epsilon_0\epsvx\left(-\nabla\phi-\partial_t\vect A\right)\right] &= 0\\
% \nabla\times\nabla\times\vect A +\mu_0\epsilon_0\epsvx\partial_t\left(\nabla\phi+\partial_t\vect A\right)&=0.
% \end{align}

\section{Classical Lagrangian Formulation}

Now since we want to go over to quantum mechanics we must start from a Lagrangian formalism.
  We will choose a Lagrangian, following other workers \cite{Huttner1992, Glauber1991}, 
and show that it retrieves Maxwell's equations.  We will initially work with a spatially varying, but 
frequency independent dielectric.
\begin{align}
L &= \frac{1}{2}\int d^3r\, \big(\vect{E}\cdot\vect{D} - \vect{B}\cdot\vect{H}\big) %\\
= \frac{\epsilon_0}{2}\int\! d^3r\,\big[\epsr(\vect{r})(\nabla\phi+\partial_t\vect A)^2 - \mur(\vect{x})c^2(\nabla\times\vect A)^2\big].
\end{align}
The momentum fields conjugate to the potential fields $A^\mu = (\phi,\vect A)$ are
\begin{align}
\Pi_0 & = \frac{\delta L}{\delta (\partial_t\phi)} = 0 \label{eq:Pi0}\\
\vect{\Pi} & = \frac{\delta L}{\delta (\partial_t\vect A)} = \epsilon_0\epsvx(\nabla\phi+\partial_t\vect A).
\end{align}
Note that $\vect{\Pi}=-\vect{D}$, i.e. the momentum field conjugate to $\vect{A}$ is the electric displacement.
Since $\Pi_0=0$ for all times, this must be preserved, which implies a constraint. Since the constraint
equation must also be preserved, there will be a further constraint imposed on the theory.
That next constraint will turn out to be Gauss's law, which enforces conservation of electric charge. 
This will in turn provide another constraint for the Hamiltonian theory.
We will try to follow Dirac's program for dealing with constraints in quantization~\cite{Dirac1964, Dirac1966}

Ultimately, in developing the Hamiltonian formulation it is necessary to correctly account for the constraints.
We are going to follow the approach suggested by Paul Dirac in Ref.~\cite{Dirac1964, Dirac1966}, 
which is analogous to the Gupta-Bleuler formulation.
In that method the fields have canonical commutation relations imposed upon them, 
and the gauge freedom restricts the states allowed the theory.  
% Eq.~(\ref{eq:Pi0}) is a constraint on the Hamiltonian and we must check for any further constraints implied by that.
% We must take all of these into account, \emph{after} we take over the classical Poisson brackets
% over to quantum commutation relations. 

The Hamiltonian for the classical fields is given by
\begin{align}
H &= \int d^3x\,[ \Pi_0\dot{A}_0+\vect \Pi\cdot\dot{\vect A}- \mathcal{L}]\\
% & = \int d^3x \, \vect \Pi\cdot\left(\frac{\vect{\Pi}}{\epsilon_0\epsvx}-\nabla\phi\right)
% -\frac{\vect \Pi^2}{2\epsilon_0\epsvx} + \frac{\epsilon_0c^2}{2}\left(\nabla\times\vect A\right)^2\\
& = \int d^3x\,\bigg[  \frac{\vect \Pi^2}{2\epsilon_0\epsvx}+ \frac{\epsilon_0c^2}{2}\left(\nabla\times\vect A\right)^2
-\vect{\Pi}\cdot\nabla\phi \bigg].
\end{align}
The equations of motion can be derived from the Hamiltonian. %  In particular, the requirement that the first constraint holds 
% for all time implies 
% \begin{equation}
%   \dot{\Pi}_0 = -\frac{\delta H}{\delta \phi} = \nabla\cdot\vect{\Pi} = 0,
% \end{equation}
The other equations of motion are 

The Hamiltonian theory can be quantized by finding the Poisson bracket and promoting it to the commutator
between the fields.  However, there is the matter of the constraints.  We will follow the Gupta-Bleuler
prescription which restricts the allowed quantum states to those that obey the constraints.  

In the Dirac formulation for handling constraints, the commutator is now the Poisson bracket augmented by the 
Poisson brackets between the constraints.  Such equations are said to only hold weakly, and all constraint terms should be retained until
the end of the calculation.  Only at the end should the constraints be set to zero.  
For the example of QED in free space see Dirac's treatment~\cite{Dirac1966}, or Ch. in Weinberg~\ref{Weinbergvol2}.

\subsection{Poisson Bracket}
The Poisson bracket in 4-vector notation follows from the choice that $A^\mu = (\phi,\vect A)$.
This implies that the momentum conjugate to $A^\mu$ is given by
\begin{equation}
\Pi_\mu = \frac{\partial \mathcal L}{\partial \dot{A}^\mu}.
\end{equation}
(Note that in this initial classical treatment, we will work in Minkowski space with metric $\eta_{\mu\nu}=\text{diag}(-1,1,1,1)$.)
The Poisson bracket for fields is 
\begin{equation}
[F_\mu(\vect{x}),G_\nu(\vect{x'})] = \sum_\alpha\int d\vect{y}\bigg[
\frac{\delta F_\mu(\vect{x})}{\delta A^\alpha(\vect{y})}\frac{\delta G_\nu(\vect{x'})}{\delta \Pi_\alpha(\vect{y})}
 -\frac{\delta G_\mu(\vect{x'})}{\delta A^\alpha(\vect{y})}\frac{\delta F_\nu(\vect{x})}{\delta \Pi_\alpha(\vect{y})}\bigg],
\end{equation}
where we have used $\Pi_\mu$ is conjugate to $A^\mu$.
This is the straightforward generalization of the standard particle mechanics Poisson bracket.
The Poisson bracket between the fields and momenta is
\begin{align}
[A_\mu(\vect{x}),\Pi_\nu(\vect{x'})]%  &= \sum_\alpha\int d\vect{y}  \bigg[
% \frac{\delta A_\mu(\vect{x})}{\delta A^\alpha(\vect{y})}\frac{\delta \Pi_\nu(\vect{x'})}{\delta \Pi_\alpha(\vect{y})}\\
% & = \sum_\alpha\int d\vect{y}g_{\mu \alpha}\delta^{\nu}_\alpha\delta(\vect{x'-y})\delta(\vect{x-y})\bigg]
= \eta_{\mu \nu}\delta(\vect{x-x'}).  
\end{align}
In the quantum theory, the Poisson bracket between the fields goes over to the commutator between the field operators.  

%\subsection{Constraints}
Now we need to consider the constraints.
  We will use Paul Dirac's scheme for dealing with the constraints.
  We need to ensure that the constraints are obeyed at all times 
--- which requires that all of the Poisson brackets with the Hamiltonian should vanish.
   We should also consider the Poisson brackets of those constraints until we have exhausted 
all of the conditions implied by the constraint.  
From Eq.~\ref{eq:Pi0}, we have $\Pi_0 = 0$.  This in turn implies that 
\begin{equation}
\partial_t\Pi_0 = [\Pi_0,H ] =-\frac{\delta H}{\delta \phi} = \nabla\cdot\vect{\Pi} = 0, 
\end{equation}
which is Gauss's law in the absence of charges.
So we also have the constraint that $\nabla\cdot\vect{\Pi} = 0$.
Coulomb's law emerges as a constraint on the fields.  

We can equally well write the Hamiltonian as 
\begin{align}
  H& = \int d^3r\bigg[\frac{\vect{\Pi}^2}{2\epsilon_0\epsvx}+\phi(\nabla\cdot\vect{\Pi})
+ \frac{\epsilon_0c^2}{2}\left(\nabla\times\vect A\right)^2 + f\Pi_0 + g(\nabla\cdot\vect{\Pi})\bigg]
\end{align}
where $f$ and $g$ are arbitrary functions.  In this case $f$ and $g$ serve as arbitrary or gauge degrees of freedom.
%  Since the constraints must be satisfied this is equivalent to adding zero.
%  I don't think this means anything for us - this is just a manifestation of the gauge freedom of the electromagnetic field.  
%  These constraints serve as the generators of gauge transformations.  

\section{Quantum Theory}

To pass over to the quantum theory we take the Poisson brackets over to commutation relations 
between operators and impose the constraints on the states we allow in the theory.
In the Gupta-Bleuler formalism, one restrict the states allowed in the theory to obey the constraints,
rather than the operators.  

The equal time commutation relations are now 
\begin{equation}
[A_\mu(\vect{x},t),\Pi_\nu(\vect{x'},t)] = i\hbar g_{\mu\nu}\delta^{3}(\vect{x-x'}),
\end{equation}
and the allowed states must obey:
\begin{equation}
\hat{\Pi}_0|\Psi\rangle = 0, \quad \nabla\cdot\hat{\Pi}|\Psi\rangle = 0.
\end{equation}
When we insert identities we will use 
\begin{align}
V_\mathrm{gauge} &= \int d^3\vect A d\phi|\phi,\vect A\rangle\langle \phi,\vect A|\\
1 &= \int d^4\Pi |\vect{\Pi}\rangle\langle\vect{\Pi}|\delta(\nabla\cdot\vect{\Pi})\delta(\Pi_0) 
= \int d^3\vect{\Pi} |\vect{\Pi}\rangle\langle\vect{\Pi}|\delta(\nabla\cdot\vect{\Pi})
\end{align}
The volume shows up because we are integrating over equivalent physical states that are related by gauge transformations.
  We won't care about this, since the volume only adds a constant to the energy.
  The delta function in the momentum states ensures that we only include states that obey the constraints.
%  We are ignoring any determinant that arising from changing measure, or rather assuming that it is already correctly accounted for.  

The delta function can be written in the Fourier representation as 
\begin{equation}
\delta(\nabla\cdot\vect{\Pi}) = \int D\Lambda \exp\left[-\frac{i}{\hbar}\int d^3x 
  \Lambda(\vect x)\nabla\cdot\vect{\Pi}(\vect x)\right],
\end{equation}
where the factor of $\hbar$ is put there for later convenience.  

Since the fields and momenta obey canonical commutation relations, and $\hat{\Pi}_0|\Psi\rangle = 0$, 
their overlap is given by
\begin{equation}
\langle \phi,\vect A | \Pi_0,\vect{\Pi} \rangle = \exp\left[-\frac{i}{\hbar}\int d^3x \vect A\cdot\vect{\Pi}\right].
\end{equation}

\section{Path Integral for Partition Function}

Ultimately we want to evaluate the ground state energy, which requires that we evaluate the partition function 
\begin{equation}
Z\subEM = \mathrm{Tr}[e^{-\beta \op{H}}] = \int d\phi_0 d\vect A_0 \langle \phi_0,\vect A_0|\exp(-\beta \op{H})|\phi_0,\vect A_0\rangle.
\end{equation}
In analogy with the path integrals described in Ch.~\ref{ch:introduction}, this is can be converted 
into a path integral --- a sum over all possible field configurations evolving in imaginary time 
$\beta = i\tau$.  In this case, at each step there is also a delta-function restricting the allowed momentum states.
The path integral is given by
\begin{align}
Z & = \int d\phi d\vect A \langle \phi,\vect A|e^{-\beta \hat{H}}|\phi,\vect A\rangle %\\
 = \int d\phi d\vect A \langle \phi, \vect A| \prod_{i=1}^{N}e^{-d\beta\hat{H}}|\phi,\vect A\rangle,
\end{align}
where $d\beta = \beta/N$.
Now we insert $(N-1)$ factors of the gauge volume between each factor of $e^{-d\beta\hat{H}}$.  
% \begin{equation}
% Z  = \prod_{i=1}^N\int d\phi_id\vect A_i \delta(\vect A_N-\vect A_0)\delta(\phi_N-\phi_0)
% \langle \phi_i,\vect A_i|e^{-d\beta\hat H}|\phi_{i-1},\vect A_{i-1}\rangle,
% \end{equation}
% where we have defined $A^\mu_N=A^\mu_0=A^\mu$.
%   Now we note that each $A_i$ corresponds to a particular temperature range, 
% so we can write $A_i = A_{\beta+d\beta}$ and $A_{i-1}=A_\beta$.  
Next we insert the identity for the momentum states between each matrix element.
  We focus our attention on a particular slice of matrix elements:
\begin{align}
\langle \phi_{\beta+d\beta}\vect A_{\beta+d\beta}| e^{-d\beta \hat{H}}|\phi_\beta, \vect A_\beta\rangle %\\
% & = \int d\Pi_0 d\vect{\Pi}_\beta\,\delta(\Pi_0)\delta(\nabla\cdot\vect{\Pi}_\beta)
% \langle \phi_{\beta+d\beta},\vect A_{\beta+d\beta}|\Pi_{0,\beta} \vect{\Pi}_\beta\rangle 
% \langle \Pi_{0,\beta}\vect{\Pi}_\beta|\exp[-d\beta \hat{H}]|\phi_\beta,\vect A_\beta\rangle\\
& = \int d\vect{\Pi}_\beta\,\delta(\nabla\cdot\vect{\Pi}_\beta)
\langle \vect A_{\beta+d\beta}| \vect{\Pi}_\beta\rangle
\langle \vect{\Pi}_\beta|\exp[-d\beta \hat{H}]|\vect A_\beta\rangle.
\end{align}
Since $\Pi_0$ is contrained to vanish, we can carry out that integral immediately, and focus on the other
components of the momentum field.

Using the Fourier representation of the delta function, we can write one of those matrix elements as 
\begin{align}
\langle \phi_{\beta+d\beta}\vect A_{\beta+d\beta}| &e^{-d\beta \hat{H}}|\phi_\beta, \vect A_\beta\rangle
=\\
% \int\! d\vect{\Pi}_\beta \int\! D\Lambda_\beta\exp\bigg[ \int d^3x \,
% -\frac{i}{\hbar}\Lambda_\beta(\nabla\cdot\vect{\Pi}_\beta) +\frac{i}{\hbar}\left(\vect A_{\beta+d\beta}
% -\vect A_{\beta}\right)\cdot\vect{\Pi}_\beta  -d\beta\left( \frac{\vect{\Pi}_\beta^2}{2\epsilon_0\epsvx}
% +\frac{1}{2}\epsilon_0c^2(\nabla\times \vect A_\beta)^2\right)\bigg]\\
& \int\! d\vect{\Pi}_\beta \int\!D\Lambda\exp\bigg[ -d\beta\int d^3x 
\bigg( \frac{\vect{\Pi}_\beta^2}{2\epsilon_0\epsvx} 
-\frac{i}{\hbar}\vect{\Pi}_\beta\cdot(\partial_\beta \vect A_\beta + \nabla\Lambda_\beta) 
+\frac{1}{2}\epsilon_0c^2(\nabla\times \vect A_\beta)^2\bigg)\bigg]
\end{align}
where we have rescaled $\Lambda$ by $d\beta$ in order to factorize out the term in $d\beta$.
%   We will be subtracting off the vacuum energy, so we will be sloppy over keeping track of any constant normalization factors.
%   We will need to be careful over constants with position dependence, 
% but overall factors of $\pi, c,\text{etc.}$ are irrelevant. 
 We have also integrated by parts on the term coming from the Fourier representation of the delta function.
  In addition we have identified 
\begin{equation}
  \partial_\beta\vect A_\beta=\frac{\vect A_{\beta+d\beta}-\vect A_\beta}{d\beta}.
\end{equation}
The momentum integrals are Gaussian, and can be carried out immediately,
\begin{multline}
\langle \phi_{\beta+d\beta}\vect A_{\beta+d\beta}| \exp[-d\beta \hat{H}]|\phi_\beta, \vect A_\beta\rangle\\
%  \int\! d\vect{\Pi}_\beta \exp\left[ -d\beta\int d^3x \frac{\vect{\Pi}_\beta^2}{2\epsilon_0\epsvx} 
% -\frac{i}{\hbar}\vect{\Pi}_\beta\cdot(\partial_\beta \vect A_\beta - \nabla\Lambda_\beta) \right] 
\propto   [\epsvx]^{3/2}\exp \left\{ -\frac{\epsilon_0d\beta}{2\hbar^2}
  \int d^3x\,\bigg[ \epsvx(\partial_\beta \vect A_\beta - \nabla\Lambda_\beta)^2
  +\frac{1}{2}\epsilon_0c^2(\nabla\times \vect A_\beta)^2\bigg]\right\}.
\end{multline}
Initially I missed the factor of $\epsvx^{3/2}$, 
which I discovered by reading a paper by Bordag on path integral quantization in dielectric media \cite{Bordag1998}.

We are integrating over all field configurations, and at all points in space.
We will introduce a notation
\begin{equation}
\int D \vect{A} D\Lambda |\epsvx|^{3/2} = \prod_{i=1}^N\prod_{x_k}\int d\vect{A}(\vect{x}_k,\beta)
\int d\Lambda(\vect{x}_k,\beta)\det[\epsilon^{3/2}(\vect{x}_k)],
\end{equation}
where the product $\vect{x}_k$ runs over all positions $\vect{x}\in \mathbb{R}^3$  and ranges of $\beta'\in[0,\beta)$.  

If we take the product of all of the matrix elements, then the total path integral is given by 
\begin{equation}
Z = \int D\vect A D\Lambda\, \epsvx^{3/2}\exp\left[-\frac{\epsilon_0}{2\hbar^2}\int d^3x\int_0^\beta d\beta\,
\epsvx\left(\partial_\beta\vect A-\nabla\Lambda\right)^2+\hbar^2c^2(\nabla\times\vect A)^2\right].  
\end{equation}
We can change variables to $x_4=\beta\hbar c$, and $A_4 = \Lambda/\hbar c$. 
Note that $A_4$ has the same dimensions as $\vect{A}$.
We can also see that $x_4$ is proportional to the thermal de-Broglie wavelength, up to a factor of $2\pi$.  
\begin{equation}
Z = \int D^4A\, \epsvx^{3/2}\exp\left[-\frac{\epsilon_0c^2}{2\hbar c}\int d^3x\int dx_4\,
\epsvx\left(\partial_4\vect A-\nabla A_4\right)^2+(\nabla\times\vect A)^2\right].
\end{equation}
We will compare this partition function to the case when the objects are infinitely far apart,
 which we will denote as $Z_0$.
The objects will still be present in the space, but they will be too far away to interact significantly.  

We can write the $\epsvx$ term as a functional determinant,
 since it is a product, $\det|\epsr(\vect{r})|=\prod_{r_k}\epsr(r_k)$.
 If we move the objects far apart from each other, 
 the $\epsr$-determinant product will not change value since we are assuming the amount of material 
 $\epsilon$ is constant.  
 Ultimately we will calculate energies from the partition function.  In the zero temperature limit
\begin{equation}
E-E_0 = -\lim_{\beta\rightarrow 0}\frac{1}{\beta} \log Z-\log Z_0.
\end{equation}
Since the constants $\det\epsilon$ will be the same in both cases, these will cancel out under this 
renormalization.
We can then ignore them and consider 
\begin{equation}
  Z = \int D^4A\, \exp\left[-\frac{\epsilon_0c^2}{2\hbar c}\int d^4x\,
  \epsvx\left(\partial_4\vect A-\nabla A_4\right)^2+(\nabla\times\vect A)^2\right].
\end{equation}

At this point Bordag\etal~\cite{Bordag1998} rescale the fields to handle the functional determinant
in $\epsr$.  (The goal of that paper seems to be to examine the divergence structure of the theory,
at a very formal level, rather than the straightforward energy calculation we wish to carry out.)
As suggested above, the rescaling is not strictly necessary.  

The filed path integral can be written in terms of the Euclidean action,
 \begin{equation}
 Z = \int D\vect{A} D\phi e^{-S_E[\vect{A},A_4]},
 \end{equation}
where the Euclidean action is 
\begin{equation}\label{eq:euclidean_action}
S_E[\vect{A},\phi] = \frac{\epsilon_0c}{2\hbar} \int d^4x\, \bigg[
\epsr(\vect{r})\left( \partial_4\vect{A}-\nabla A_4\right)^2
+\vect{A}\cdot\nabla\times\nabla\times\vect{A}\bigg].
\end{equation}
This change of variable was necessary after the integral over the conjugate momentum fields.
We have already used all of the constraints on the fields to write the equations in this form. 
We are using the euclidean path integral, with $x_4=\beta$.

\subsection{Fadeev-Popov Gauge Fixing}
\todo{Cite Fadeev-Popov. or Fadeev-Slavnov}
~\cite{Faddeev1991}
We need to enforce a gauge condition, since currently the path integral runs over all field configurations.
  The integral includes physically equivalent states that are related to each other by a gauge transformation.
  We will then only integrate over one point from the gauge fibre by enforcing a delta-function constraint.  

The gauge transformation can be written as 
\begin{equation}
A'^\mu \rightarrow A^\mu +\partial^\mu\alpha,
\end{equation}
where $\alpha$ is an arbitrary function.
This change of variables does not change the value of the path integral, and will yield divergent 
results if it is not removed.  
We only want to sum over one of each physical configuration, so we can imagine integrating over the redundant $\alpha$ variables.  

If we start with a gauge constraint $G[A^\mu]$, we can write this in terms of the $A^\mu$ and $\alpha$ as $G[A^\mu+\partial^\mu\alpha]$.
To get the correct measure after integrating over all $\alpha$
 we must use the functional generalization of the change of variable for a single delta function:
\begin{equation}
\int dx \delta(f(x)) = \int df \frac{1}{|\partial_xf|}\delta(f).
\end{equation}
Since we will integrate over all redundant alpha we need to cancel off that Jacobian factor.
We will use the following delta-function for the integral over $A$
\begin{equation}
  \delta(G[A])\det\left(\frac{\delta G[A]}{\delta\alpha}\right).
\end{equation}
The path integral becomes 
\begin{equation}
  Z = \int D\vect{A} DA_4\, \det \frac{\delta G}{\delta \alpha} e^{-S_E}.
 \end{equation}
We can put this in the usual form with yet another trick.
Let us choose a gauge where $G[A]-\omega(x) =0$.
We can also insert unity in the form of a Gaussian integral:
\begin{equation}
  1 = \int D\omega \exp\left[-\int d^4x\, \omega^2(x)\right],
\end{equation}
where any constant factors are assumed to be absorbed into the normalization of the path integral.
  The gauge-fixed path integral finally becomes
\begin{equation}
 Z = \int D\vect{A} DA_4\, \det \frac{\delta G}{\delta \alpha} 
\exp\left[-S_E-\frac{\epsilon_0 c}{2\hbar}\int d^4x\, G^2\right].
\end{equation}
%  For non-Abelian field theories, the functional determinant is often turned into an integral over 
%  anti-commuting Grassman variables \cite{Srednicki2008}.  This allows the Feynman rules to be extended
% to account for the gauge-fixing, since the gauge transformation is non-linear in the fields.  
  For electromagnetism, since the gauge transformation is independent of the fields,
  the gauge-fixing functional determinant is also independent of the fields.
  Nonetheless, we need to keep track of this determinant to correctly count the degrees of freedom,
  and it depends on the material properties of the interacting bodies, so we cannot ignore it in all cases.

\subsection{Gauge Choices}
Overall, the path integral is independent of our choice of gauge,
 and it would be nice to show that you get the same results in two different gauges.
  I have come across the following gauge choices:
\begin{enumerate}
\item Coulomb Gauge: $\nabla\cdot\vect A=0$. \\
This gauge is the familiar choice in non-relativistic quantum optics.
  The potential decouples from the vector field, which only has two transverse degrees of freedom.
  While this is a good choice in free space, it is complicated by the presence of $\epsvx$.
  You find for general $\epsilon$ that $\vect A$ is coupled to $A_4$, 
    which ends up requiring some messy work with Green functions to get around.
  The functional determinant won't depend on epsilon so we can ignore it, 
    since it will cancel out when we consider the difference between the vacuum energy and the energy when bodies are present.  

\item Generalized Coulomb Gauge: $\nabla\cdot\epsilon\vect A=0$\\
  This is the natural choice if you allow the dielectric to vary spatially.
  This is in fact the choice used in other attempts to quantize the EM field inside 
a dielectric~\cite{Knoell1987, Glauber1991}.
  This choice removes any coupling between $\vect{A}$ and $A_4$.
  As can be seen from the equations of motion.
  The functional determinant then depends on $\epsilon$, so we should track it.
  Unfortunately, this is not susceptible to the above gauge-fixing techniques.
  Generalized Lorenz gauge solves that issue, and is how we have proceeded.  

\item Temporal Gauge: $A_4=0$.  
    This gauge simply removes the scalar field, and rolls all of that dependence into the longitudinal part of $\vect A$.
    Ramond claims that this does not fully specify the gauge of the field~\cite{Ramond1990}.
    In essence, temporal gauge has a problem with zero-frequency modes, or fields that are constant in time.
    Surprisingly, this does seem to be a fairly common gauge for people working with path integrals in dielectrics~\cite{Bechler1999,Rahi2009}.
    However, it is not a complete gauge fixing so we will not pursue it any further.  

\item Bordag's generalized Lorenz gauge: 
    $\frac{1}{\epsilon}\nabla\cdot\epsilon\vect A + \epsilon\partial A_4=0$.
   Bordag \textit{et.~al.} used this gauge in a calculation of the heat kernel for the EM field in a linear dielectric.
    They found the disquieting feature that the longitudinal and scalar degrees of freedom do not
    cancel out the ``ghost'' degrees of freedom.  This perhaps suggests that quantizing and gauge-fixing 
    the effective field theory has problems, and it may be better to proceed 
    This gauge choice has the advantage of also removing any coupling between $\vect A$ and $A_4$.
    In addition, when expanding the gradients out, the leading terms have no $\epsilon$-dependence
    ---which makes worldline-quantization much more straightforward.  
    The resulting functional determinant depends on $\epsilon$, so we cannot drop the determinant.  

\item Generalized Lorenz Gauge: $\nabla\cdot\epsilon\vect A + \partial A_4=0$.
  This removes the coupling between $\vect{A}$ and $A_4$.
  It's form is chosen to cancel the cross term in the first quadratic piece of Eq. (\ref{eq:euclidean_action}).
  It also gives the same functional determinant as the $A_4$ integral, which allows a partial cancellation of terms.  
\end{enumerate}

There is a perplexing array of gauge-fixings available to us in this computation.
Even with the requirements that the leading coeffients be free-space-like, and the coupling between
the scalar and vector fields cancel, there is still a residual freedom in fixing gauge.  

\section{Gauge-Fixing: Generalized Lorenz Gauge}
We will enforce a generalized Lorenz gauge,
\begin{equation}
G[A]=\nabla\cdot\epsilon(\vect{x})\vect{A}+\partial_4A_4 = 0
\end{equation}
in the path integral.  Let us make a gauge transformation on this,
\begin{equation}
G[A+\partial \alpha] = \nabla\cdot[\epsilon(\vect{x})(\vect{A}+\nabla\alpha)]+\partial_4(A_4+\partial_4\alpha).
\end{equation}
We can then read off the functional derivative:
\begin{equation}
\frac{\delta G}{\delta \alpha} = \nabla\cdot\epsilon(\vect{x})\nabla + \partial_4^2.
\end{equation}

The gauge-fixed Euclidean action becomes 
\begin{align}
S_E % &= \frac{\epsilon_0 c}{2\hbar}\int d^4x
% \left(\partial_4\vect{A} - \sqrt{\epsilon}\nabla A_4\right)^2
%  + \left(\nabla\times\frac{\vect{A}}{\sqrt{\epsilon}}\right)^2
% +\left(\partial_4A_4+\nabla\cdot\sqrt{\epsilon}\vect{A}\right)^2\\
&=\frac{\epsilon_0 c}{2\hbar}\int d^4x\,|\partial_4\vect{A}|^2 
+(\nabla\cdot\sqrt{\epsilon}\vect{A})^2 +[\partial_4A_4]^2+\epsilon|\nabla A_4|^2
 + \left(\nabla\times\frac{\vect{A}}{\sqrt{\epsilon}}\right)^2
\end{align}
The term in $A_4$ can be rewritten as 
\begin{equation}
\int d^4x [\partial_4A_4]^2+\epsilon|\nabla A_4|^2 = \int d^4x\, A_4\left(-\nabla\cdot\epsilon\nabla-\partial_4^2\right)A_4,
\end{equation}
at the cost of some boundary terms which are assumed to vanish.  
We can now (at least formally) evaluate the Gaussian integral over $A_4$ and write 
\begin{equation}
\int D A_4 \exp\left[-\int d^4x \,A_4\left(-\nabla\cdot\epsilon\nabla-\partial_4^2\right)A_4\right] \propto \det{}^{-1/2}
\left(-\nabla\cdot\epsilon\nabla-\partial_4^2\right).
\end{equation}
will is identical to the term in the functional determinant from normalizing the functional delta function.
%   This result follows from thinking about the following finite dimensional Gaussian integral,
% \begin{align}
% \int d\vect{y} \exp[ -\vect{y}^TM\vect{y}] = \int d\vect{z} \det[O] \exp[-\vect{z}^TO^TMOz]
% \end{align}
% If we assume $M$ is Hermitian, we can find its eigenvalues and eigenvectors.
%   If we choose $O$ to diagonalize $M$, we have decomposed $\vect{y}$ into the eigenvectors of $M$.
%   This is an orthogonal transformation, and the determinant $\det O$ is unity.
%   The eigenvectors are orthogonal, so they decouple and the integral becomes a product of simple Gaussian integrals.   
% \begin{align}
% \int d\vect{z}\exp[-\vect{z}^T\Lambda\vect{z}]=\prod_k\int dz_k \exp[ -\lambda_kz_k^2] =  \prod_k \sqrt{\frac{\pi}{\lambda_k}},
% \end{align}
% where we have defined the diagonal matrix $\Lambda=O^TMO$.
%    The determinant of $\Lambda$ is just the product of its diagonal elements - which is exactly what we found as the result of the integral.  We can now invert the orthogonal transformations to write 
% \begin{equation}
% \int d\vect{y} \exp[ -\vect{y}^TM\vect{y}] \propto \det{}^{-1/2}M
% \end{equation}
Now note that the result of the $A_4$ integral is the same as the functional determinant 
from fixing the gauge - this is the reason for choosing to use a slightly different gauge to Bordag.
 
Similarly, the terms involving $\epsilon\vect{A}$ now become
\begin{align} \int d^3\vect{x}\,
\bigg[\left(\nabla\times\frac{\vect{A}}{\sqrt{\epsilon}}\right)^2
+(\nabla\cdot\sqrt{\epsilon}\vect{A})^2 &= 
\int d^3\vect{x}\,A_i\left[
  -\frac{1}{\sqrt{\epsilon}}(\delta_{ij}\nabla^2-\partial_i\partial_j)\frac{1}{\sqrt{\epsilon}}
  -\sqrt{\epsilon}\partial_i\partial_j\sqrt{\epsilon} \right] A_j
\end{align}
So the partition function now becomes:
\begin{align}
Z%  &= \int D\vect{A} DA_4\, \det[-\partial_4^2-\nabla\cdot\epsilon\nabla]
 % \exp\left[-\int d^4x \mathcal{L}\right]\\
&=C\det\left[-\partial_4^2-\nabla\cdot\epsilon\nabla\right]^{1/2}
\det\left[-\left(\partial_4^2+\frac{1}{\sqrt{\epsilon}}\nabla^2\frac{1}{\sqrt{\epsilon}}\right)\delta_{ij}
 + \frac{1}{\sqrt{\epsilon}}\partial_i\partial_j\frac{1}{\sqrt{\epsilon}}
-\sqrt{\epsilon}\partial_i\partial_j\sqrt{\epsilon} \right]^{-1/2},
 \end{align}
where $C$ absorbs all of the constant pieces.  

% We can recover the vacuum result by setting $\epsilon=1$ everywhere.  This yields
% \begin{equation}
% Z_0 = C\det\left[-(\partial_4^2+\nabla^2)\right]^{1/2}
% \det\left[-\left(\partial_4^2+\nabla^2\right)\delta_{ij} \right]^{-1/2}
% \end{equation}
% If we now use $\det{A\delta_{ij}} = [\det{A}]^3$, we see that 
% \begin{equation}
% Z_0 = -\det[-(\partial_4^2+\nabla^2)],
% \end{equation}
% which is twice the energy of a free massless scalar field.
%   This makes sense, a free electromagnetic field has two massles degrees of freedom that obey the Klein-Gordon equation, so you'd expect twice the vacuum energy.  

\section{Scalar Decomposition for Planar Geometries}


% \section{Quantization with Harmonic Medium and Linear Response}

% In this section we will attempt to carry out the full quantization procedure for a harmonic
% medium.  We will start from a gauge-invariant Lagrangian for the electromagnetic field coupled
% to a medium. 
% We will derive the Hamiltonian, and then compute the partition function.
%  We will then gauge-fix, and integrate out the harmonic medium.  This is essentially
% based on the approach of deriving the dielectric via linear response theory advocated in Rosa~\etal\cite{Rosa2008}.
% We will integrate out the matter-fields, and treat the interaction out to second order in the interaction.  
% We will then carry out the remaining integral over the fields.  

% This method should be well-defined perturbation theory, and follow the usual physical reasoning.  This
% should avoid any of the strange features of trying to quantize the field while it is already
% interacting with an effective medium.  

% The combined field-matter Lagrangian for the EM field interacting with a charged scalar field is
% \begin{align}
%   L =& \int d^3\vect{x}\,\bigg[ \frac{\epsilon_0}{2}(\nabla A_0+\partial_t\vect{A})^2
%   - \frac{1}{2\mu_0}(\nabla\times\vect{A})^2\nonumber\\
% &+\bigg(\partial_t+i\frac{e}{c}A_0\bigg)\phi^*\bigg(\partial_t-i\frac{e}{c}A_0\bigg)\phi
% - \bigg(\nabla+i\frac{e}{c}\vect{A}\bigg)\phi^*\bigg(\nabla-i\frac{e}{c}\vect{A}\bigg)\phi
% -\phi^*(u(x)+m^2)\phi\bigg],
% \end{align}
% where there is a potential $u(x)$ binding the charged scalar to exist only in certain regions.  We
% will take $u(x)=0$ inside the bodies, and $u(x)\rightarrow\infty$ outside the bodies.  
% The action is invariant under the combined gauge transformations,
% \begin{align}
%  A_0&\rightarrow A_0-\partial_t\alpha\\
% \vect{A} & \rightarrow \vect{A}+\nabla\alpha\\
% \phi &\rightarrow e^{-i\frac{e}{c}\alpha}\phi.
% \end{align}

% The canonical momenta are found to be
% \begin{align}
%   \pi_0 &:= \frac{\delta L}{\delta (\partial_t A_0)} = 0\\
%   \vect{\Pi} & := \frac{\delta L}{\delta(\partial_t\vect{A})} = \epsilon_0(\nabla A_0+\partial_t\vect{A})\\
%   \vect{\pi} & := \frac{\delta L}{\delta(\partial_t\phi)} = \bigg(\partial_t+i\frac{e}{c}A_0\bigg)\phi^*.
% \end{align}
% As noted before, the vanishing of $\pi_0$ is a constraint which must be maintained by the dynamics.
% Preserving this constraint will require that $\partial_t\vect{\Pi}=\nabla\cdot\vect{\Pi}=0$.
% We will employ the Gupta-Bleuler quantization, which restricts the allowed states. 

% The full Hamiltonian is 
% \begin{align}
%   H &:= \int d\vect{x}(\pi_0 \partial_t A_0+\vect{\Pi}\cdot\partial_t\vect{A}+\pi\partial_t\phi 
%   +\pi^*\partial_t\phi^*) - L\\
% %   &:= \int d\vect{x}\bigg[\vect{\Pi}\cdot\frac{(\Pi-\nabla A_0)}{\epsilon_0}
% %   +\pi(\pi^*+i\frac{e}{c}A_0\phi^*) +\pi^*(\pi-i\frac{e}{c}A_0\phi^) \\
% %  &-\frac{\vect{\Pi}^2}{2\epsilon_0} + \frac{1}{2\mu_0}(\nabla\times\vect{A})^2\nonumber\\
% % &-\frac{\pi^*\pi}{2}+ \bigg(\nabla+i\frac{e}{c}\vect{A}\bigg)\phi^*\bigg(\nabla-i\frac{e}{c}\vect{A}\bigg)\phi
% % +\phi^*(u(x)+m^2)\phi\\
%   &:= \int d\vect{x}\bigg[\frac{\vect{\Pi}^2}{2\epsilon_0}+\frac{1}{2\mu_0}(\nabla\times\vect{A})^2+\pi^*\pi 
%  +\phi^*(-\nabla^2 + u(x)+m^2)\phi\nonumber\\
%  &\hspace{1cm}  +i\frac{e}{c}A_0(\pi \phi^*-\pi^*\phi) 
%    +i\frac{e}{c}\vect{A}\cdot \big(\phi\nabla\phi^*-\phi^*\nabla\phi\big)+\frac{e^2}{c^2}|\vect{A}|^2\phi^*\phi
% +A_0\frac{\nabla\cdot\vect{\Pi}}{\epsilon_0}
%  \bigg]
% \end{align}

% Given the Hamiltonian, the partition function can be readily computed, given the Gaussian
% nature of the integrals.  The long-and-short of this procedure should be that we will find 
% $Z\sim\int D()e^{-S_E}.$
% \begin{align}
%   Z &= \tr[e^{-\beta \op{H}}]\\
%   &= \int d^2\phi d\vect{A} dA_0 \langle A_0,\vect{A}| e^{-\beta \op{H}}|A_0,\vect{A}\rangle\\
%   &= \int D\phi^*D\phi D\vect{A} DA_0 D\pi^*D\pi D\vect{\Pi}D\Pi_0\delta(\pi_0)\delta(\nabla\cdot\Pi)
%   e^{-\Delta \beta H_n +\frac{i}{\hbar}(\vect{\Pi}\cdot\partial_\beta \vect{A}+\pi^*\partial_\beta\phi )}
% \end{align}
% \comment{should probably split $\phi = \phi_1+i\phi_2$ integrating over complex fields requires some
% care with the book-keeping.  Then find $\pi_1,\pi_2$.  Can use $\langle \phi_1|\pi_1\rangle = e^{i\phi_1\pi_1/\hbar}$.
% }

% End result of careful integration over two independent real fields for matter, we can just skip to 
% \begin{align}
%   Z = \int D\phi^*D\phi D\vect{A}DA_0 e^{-S_E},
% \end{align}
% where
% \begin{align}
%   S_E =& \int_0^{\hbar\beta} d\tau\int d^3\vect{x}\,\bigg[ \frac{\epsilon_0}{2}(\nabla A_0+\partial_\tau\vect{A})^2
%   + \frac{1}{2\mu_0}(\nabla\times\vect{A})^2\nonumber\\
%   &+\bigg(\partial_\tau+i\frac{e}{c}A_0\bigg)\phi^*\bigg(\partial_\tau-i\frac{e}{c}A_0\bigg)\phi
%   + \bigg(\nabla+i\frac{e}{c}\vect{A}\bigg)\phi^*\bigg(\nabla-i\frac{e}{c}\vect{A}\bigg)\phi
%   +\phi^*(u(x)+m^2)\phi\bigg],
% \end{align}
% and $\tau=\hbar \beta$, and we also scaled $A_0\rightarrow \hbar^{-1} A_0$.  

% Now expand the matter part out to quadratic order in the coupling.
% \begin{align}
%   S_E =& \int_0^{\hbar\beta} d\tau\int d^3\vect{x}\,\bigg[ \frac{\epsilon_0}{2}(\nabla A_0+\partial_\tau\vect{A})^2
%   + \frac{1}{2\mu_0}(\nabla\times\vect{A})^2
%   +\phi^*\big(-\partial_\tau^2-\nabla^2+u(x)+m^2\big)\phi\nonumber\\
%   &+ i\frac{e}{c}A^\mu(\phi^*\partial_\mu\phi -\phi\partial_\mu\phi^*)
%   +\frac{e^2}{c^2}A^\mu A_\mu\phi^*\phi-i\frac{e}{c}\partial_\mu A^\mu\phi^*\phi\bigg] 
% \end{align}
% where we are using the Euclidean inner product for 4-vectors.  


% \subsection{Rahi approach}
% \begin{enumerate}
%   \item Expand exponential to second order in $e$.
%     \begin{equation}
%     e^{-\int d^4x A_\mu j^\mu} \approx (1 - \int d^4x A_\mu(x)j^\mu(x) +\frac{1}{2}\int d^4x A_\mu(x) A_\nu(y)
%     j^\mu(x)j^\nu(y))
%   \end{equation}
%   \item Evaluate Gaussian integrals,
%     \begin{equation}
%       \int D\phi D\phi^* \phi^*(x)\phi(x) e^{-\int d^4x \phi^*(x)G^{-1}\phi(x)} = G(x)
%     \end{equation}
%   \item Simplify, Re-exponentiate.
%     Some people use Kubo formula.
%     By definition for linear response, with Ohm's law 
%     \begin{equation}
%       \vect{J} = \sigma \vect{E},
%     \end{equation}
%     so $\sigma = \epsilon-1$.  
%     Kubo formula for conductivity in linear response is 
%     $\sigma^{\mu\nu}(\omega) = \int dt \langle[ j^\mu(t),j^\nu(t')] e^{-i\omega t}.$
%     Quite general relationship.  $\sigma$ is susceptibility, $[j,j]$ is Green function response.  
    
%     Hopefully can do this calculation for general 


% \end{enumerate}



% What are the gauge-invariance properties?  Gauge-invariance implies current conversation.  





%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "thesis_master"
%%% End: 
